<?xml version="1.0" encoding="utf-8"?>
<components:EPanel xmlns:fx="http://ns.adobe.com/mxml/2009"
				   xmlns:s="library://ns.adobe.com/flex/spark"
				   xmlns:mx="library://ns.adobe.com/flex/mx"
				   xmlns:parsley="http://www.spicefactory.org/parsley"
				   xmlns:components="framework.components.*"
				   width="408" height="370" title="ABM de Usuarios">
	
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
		<!-- Si o si parece q es necesario agregar c/ vista a un context sino toma el global aparentemente -->
		<parsley:Configure />
		
		<s:TraceTarget
			
			includeCategory="true"
			
			includeLevel="true"
			
			includeTime="true"
			
			level="{LogEventLevel.DEBUG}">
			
			<s:filters>
				
				<fx:String>org.spicefactory.parsley.*</fx:String>
				
			</s:filters>
			
		</s:TraceTarget>
		
	</fx:Declarations>
	
	<fx:Script>
		<![CDATA[
			import Modules.ABMUsuariosPrueba.ABMUsuariosPruebaConfig;
			import Modules.ABMUsuariosPrueba.Application.bussiness.Entities.DTOs.ABMUsuariosPruebaDTO_baja;
			import Modules.ABMUsuariosPrueba.Application.bussiness.Entities.DTOs.ABMUsuariosPruebaDTO_alta;
			
			import Modules.ABMUsuariosPrueba.Application.presentationModel.MainScreenModel;
			import Modules.ABMUsuariosPrueba.data.conf.Messages;
			
			import application.domain.GlobalModel;
			
			import mx.logging.LogEventLevel;
			
			/*
			import Modules.Login.Application.bussiness.Entities.DTOs.LoginDTO;
			import Modules.Login.Application.messages.LoginRequestMessage;
			import Modules.Login.Application.presentationModel.MainScreenModel;
			import Modules.Login.LoginConfig;
			
			import application.domain.GlobalModel;
			import application.events.LoginResultEvt;
			
			import mx.logging.LogEventLevel;
			
		 
			[Inject]
			[Bindable]
			public var globalModelRef:GlobalModel;
			
			[Inject]
			[Bindable]
			public var msPM:Modules.Login.Application.presentationModel.MainScreenModel;
			
		
			
			private function _aceptarClick():void {  
				var loginDTO:LoginDTO = new LoginDTO(txtUserName.text,txtUserPass.text);
				msPM.sendLoginRequestMSG(LoginRequestMessage.LOGIN_REQUEST_MESSAGE,loginDTO);
			}
			
			[Init]
			public function handleInit():void
			{
				btnAccept.enabled=true;
				
				addEventListener(LoginResultEvt.LOGIN_RESULT_EVT, loginResultEvtHandlerWrapper);
			}
			
			
			public function loginResultEvtHandlerWrapper(evt:Event):void { 
				trace("llegÃ³"); 
			
			}
			
		
			public static const ID_MSGE_ABM:int =37;  
			
			private function _btnABMAceptarClick():void { 
				var loginDTO:LoginDTO = new LoginDTO(txtUserName.text,txtUserPass.text);
				msPM.sendLoginRequestMSG(ID_MSGE_ABM,loginDTO); 
			}
			*/
			
			
			[Inject]
			[Bindable]
			public var globalModelRef:GlobalModel;
			
			[Inject]
			[Bindable]
			public var msPM:MainScreenModel;
			
			
			private function _btnDeleteOnClick():void { 
				var abmUsuariosPruebaDTO_baja:ABMUsuariosPruebaDTO_baja = new ABMUsuariosPruebaDTO_baja (txtUsuario.text,txtPassword.text);
				msPM.sendDeleteRequestMSG(Messages.USUARIOS_PRUEBA_DELETE_MESSAGE ,abmUsuariosPruebaDTO_baja); 
			}
			
			private function _btnAltaOnClick():void { 
				var abmUsuariosPruebaDTO_alta:ABMUsuariosPruebaDTO_alta = new ABMUsuariosPruebaDTO_alta (txtUsuario.text,txtPassword.text,txtMail.text);
				msPM.sendAltaRequestMSG(Messages.USUARIOS_PRUEBA_ALTA_MESSAGE ,abmUsuariosPruebaDTO_alta); 
			}



			private function _btnConsultaOnClick():void { 
				//var abmPersDTO_baja:ABMPersDTO_baja = new ABMPersDTO_baja (txtParam1.text,txtParam2.text);
				//var abmPersDTO_baja:Object=null; //:EDTO 
				msPM.sendConsultaRequestMSG(Messages.USUARIOS_PRUEBA_CONSULTA_MESSAGE); //,abmPersDTO_baja); 
			}
			
			
		]]>
	</fx:Script>
	

	<!-- fx:Binding source="txtUserName.text" destination="{msPM.userName}" twoWay="true" 	
	<fx:Binding source="txtUserPass.text" destination="{msPM.userPass}" twoWay="true" -->
	
	<!--
	<components:ECanvas>
		<components:ELabel x="94" y="64" width="47" height="18" text="User:"/>
		<components:ELabel x="94" y="90" width="47" height="18" text="Name:"/>
		<components:ETextInput x="160" y="60" id="txtUserName"  />  
		<components:ETextInput x="160" y="86" id="txtUserPass"  />  
		<components:EButton x="140" y="156" label="Cancel" id="btnCancel"/>
		<components:EButton x="218" y="156" label="Accept" id="btnAccept" click="_aceptarClick()" enabled="false"/>
		<components:ETextInput id="txtTmp" x="0" y="189" width="400" height="78" text="{globalModelRef.servicios.root.login}" /> 
		<components:EButton x="15" y="112" width="103" height="40" label="ABM (ins)" id="btnPruebaABM"  click="_btnABMAceptarClick()"/>
	</components:ECanvas>
	-->		

	<components:ECanvas height="328">
		<components:ECanvas height="138">
		
			<components:ELabel x="48" y="19" width="145" height="18" text="Usuario:"/>
			<components:ELabel x="48" y="45" width="145" height="18" text="Password:"/>
			<components:ETextInput x="202" y="15" id="txtUsuario" text="{msPM.delParam1}" />  
			<components:ETextInput x="202" y="41" id="txtPassword" text="{msPM.delParam2}"  />  
			
			<components:EButton x="49" y="115" label="DELETE" id="btnDelete" click="_btnDeleteOnClick()"/>
			<components:ELabel x="49" y="71" width="145" height="18" text="Mail:"/>
			<components:ETextInput id="txtMail" x="202" y="71" width="168" text="{msPM.delParam2}"/>
			<components:EButton x="145" y="115" label="ALTA" id="btnAlta" click="_btnAltaOnClick()"/>
		
		</components:ECanvas>

		<components:ECanvas x="0" y="146" height="166">
			<components:ELabel x="163" y="5" width="79" height="18" fontSize="18" fontStyle="normal"
							   fontWeight="bold" lineBreak="toFit" lineThrough="false" text="SELECT"/>
			
			<components:EDataGrid id="dgPersonas" x="20" y="24" width="361" height="96"
								  dataProvider="{msPM.xmllcUsuariosPrueba}"/>
			
			<components:EButton x="47" y="128" width="145" label="SELECT - Usuarios" click="_btnConsultaOnClick()"/>

		</components:ECanvas>
	
	</components:ECanvas>
	
</components:EPanel>
